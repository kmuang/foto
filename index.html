<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tailwind Photo Gallery</title>
  <link rel="shortcut icon" href="img/logo.png" type="image/x-icon">

  <!-- Tailwind CDN (for demo). For production, use a built build. -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* subtle fade-in for images */
    .img-fade {
      opacity: 0;
      transform: translateY(6px);
      transition: opacity .35s ease, transform .35s ease;
    }
    .img-fade.loaded {
      opacity: 1;
      transform: translateY(0);
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-900">

  <main class="max-w-6xl mx-auto p-4 sm:p-6">
    <header class="mb-6">
      <h1 class="text-2xl sm:text-3xl font-semibold">Photo Gallery</h1>
      <p class="text-sm text-gray-600 mt-1">Responsive gallery with lightbox — tap an image to open fullscreen.</p>
    </header>

    <!-- Gallery grid -->
    <section id="gallery" class="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
      <!-- Replace the src values with your own images -->
      <figure class="group relative overflow-hidden rounded-lg bg-white shadow-sm">
        <img data-src="https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?w=1200&q=80&auto=format&fit=crop"
             alt="Forest path"
             class="w-full h-48 object-cover cursor-pointer img-fade"
             loading="lazy" data-caption="Forest path — nature">
        <figcaption class="p-3 text-sm text-gray-700">
          Forest path
        </figcaption>
      </figure>

      <figure class="group relative overflow-hidden rounded-lg bg-white shadow-sm">
        <img data-src="https://images.unsplash.com/photo-1519681393784-d120267933ba?w=1200&q=80&auto=format&fit=crop"
             alt="Mountain sunrise"
             class="w-full h-48 object-cover cursor-pointer img-fade"
             loading="lazy" data-caption="Mountain sunrise">
        <figcaption class="p-3 text-sm text-gray-700">Mountain sunrise</figcaption>
      </figure>

      <figure class="group relative overflow-hidden rounded-lg bg-white shadow-sm">
        <img data-src="https://images.unsplash.com/photo-1520975921154-3d7c9b6c5d8a?w=1200&q=80&auto=format&fit=crop"
             alt="City skyline"
             class="w-full h-48 object-cover cursor-pointer img-fade"
             loading="lazy" data-caption="City skyline at dusk">
        <figcaption class="p-3 text-sm text-gray-700">City skyline</figcaption>
      </figure>

      <figure class="group relative overflow-hidden rounded-lg bg-white shadow-sm">
        <img data-src="https://images.unsplash.com/photo-1526772662000-3f88f10405ff?w=1200&q=80&auto=format&fit=crop"
             alt="Desert road"
             class="w-full h-48 object-cover cursor-pointer img-fade"
             loading="lazy" data-caption="Desert road">
        <figcaption class="p-3 text-sm text-gray-700">Desert road</figcaption>
      </figure>

      <figure class="group relative overflow-hidden rounded-lg bg-white shadow-sm">
        <img data-src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=1200&q=80&auto=format&fit=crop"
             alt="Ocean waves"
             class="w-full h-48 object-cover cursor-pointer img-fade"
             loading="lazy" data-caption="Ocean waves">
        <figcaption class="p-3 text-sm text-gray-700">Ocean waves</figcaption>
      </figure>

      <figure class="group relative overflow-hidden rounded-lg bg-white shadow-sm">
        <img data-src="https://images.unsplash.com/photo-1470770903676-69b98201ea1c?w=1200&q=80&auto=format&fit=crop"
             alt="Autumn leaves"
             class="w-full h-48 object-cover cursor-pointer img-fade"
             loading="lazy" data-caption="Autumn leaves in forest">
        <figcaption class="p-3 text-sm text-gray-700">Autumn leaves</figcaption>
      </figure>
    </section>
  </main>

  <!-- Lightbox / Modal -->
  <div id="lightbox" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/70 p-4">
    <div class="relative max-w-4xl w-full">
      <button id="closeBtn" class="absolute right-2 top-2 text-white bg-black/40 rounded-full p-2 hover:bg-black/60" aria-label="Close">✕</button>

      <div class="bg-gray-900/80 rounded-lg overflow-hidden">
        <img id="lightboxImg" src="" alt="" class="w-full max-h-[80vh] object-contain bg-black">
        <div id="lightboxCaption" class="p-3 text-sm text-white/90"></div>
      </div>

      <!-- Prev / Next -->
      <button id="prevBtn" class="absolute left-2 top-1/2 -translate-y-1/2 text-white bg-black/40 rounded-full p-2 hover:bg-black/60" aria-label="Previous">◀</button>
      <button id="nextBtn" class="absolute right-2 top-1/2 -translate-y-1/2 text-white bg-black/40 rounded-full p-2 hover:bg-black/60" aria-label="Next">▶</button>
    </div>
  </div>

<script>
  // Simple lazy loader for demo (uses data-src)
  document.addEventListener('DOMContentLoaded', () => {
    const imgs = document.querySelectorAll('img[data-src]');
    const onLoad = (img) => {
      img.classList.add('loaded');
    };

    if ('IntersectionObserver' in window) {
      const io = new IntersectionObserver((entries, obs) => {
        entries.forEach(e => {
          if (e.isIntersecting) {
            const img = e.target;
            img.src = img.dataset.src;
            img.removeAttribute('data-src');
            img.addEventListener('load', () => onLoad(img), { once: true });
            obs.unobserve(img);
          }
        });
      }, { rootMargin: '100px' });

      imgs.forEach(img => io.observe(img));
    } else {
      // fallback: load all
      imgs.forEach(img => {
        img.src = img.dataset.src;
        img.addEventListener('load', () => onLoad(img), { once: true });
      });
    }
  });

  // Lightbox logic
  (function () {
    const gallery = Array.from(document.querySelectorAll('#gallery figure img'));
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightboxImg');
    const lightboxCaption = document.getElementById('lightboxCaption');
    const closeBtn = document.getElementById('closeBtn');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    let currentIndex = 0;

    function openLightbox(index) {
      const img = gallery[index];
      // prefer already-loaded src, else data-src (if still not loaded)
      const src = img.src || img.dataset.src;
      lightboxImg.src = src;
      lightboxImg.alt = img.alt || '';
      lightboxCaption.textContent = img.dataset.caption || img.alt || '';
      lightbox.classList.remove('hidden');
      lightbox.classList.add('flex');
      currentIndex = index;
      // trap focus if needed (simple)
      closeBtn.focus();
    }

    function closeLightbox() {
      lightbox.classList.add('hidden');
      lightbox.classList.remove('flex');
      lightboxImg.src = '';
    }

    function showPrev() {
      openLightbox((currentIndex - 1 + gallery.length) % gallery.length);
    }
    function showNext() {
      openLightbox((currentIndex + 1) % gallery.length);
    }

    // click on gallery images
    gallery.forEach((img, i) => {
      img.addEventListener('click', () => openLightbox(i));
      img.addEventListener('keydown', e => { if (e.key === 'Enter') openLightbox(i); });
      // make images focusable for accessibility
      img.tabIndex = 0;
    });

    closeBtn.addEventListener('click', closeLightbox);
    prevBtn.addEventListener('click', showPrev);
    nextBtn.addEventListener('click', showNext);

    // keyboard support
    document.addEventListener('keydown', (e) => {
      if (lightbox.classList.contains('flex')) {
        if (e.key === 'Escape') closeLightbox();
        if (e.key === 'ArrowLeft') showPrev();
        if (e.key === 'ArrowRight') showNext();
      }
    });

    // close when clicking outside content
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox) closeLightbox();
    });

    // Basic touch swipe support for lightboxImg
    let touchStartX = 0;
    let touchEndX = 0;
    lightboxImg.addEventListener('touchstart', (e) => {
      touchStartX = e.changedTouches[0].screenX;
    });
    lightboxImg.addEventListener('touchend', (e) => {
      touchEndX = e.changedTouches[0].screenX;
      const diff = touchEndX - touchStartX;
      if (Math.abs(diff) > 50) {
        if (diff > 0) showPrev(); else showNext();
      }
    });
  })();
</script>
</body>
</html>